{"is_source_file": true, "format": "Python", "description": "This module implements a Redis-based rate limiting system using FastAPI. It defines classes and methods to configure and enforce rate limits on API requests through a distributed approach with Redis as the backend.", "external_files": ["app/core/cache", "app/core/config"], "external_methods": ["redis.asyncio", "fastapi.Depends", "fastapi.HTTPException", "fastapi.Request", "fastapi.status", "fastapi.responses.JSONResponse"], "published": ["rate_limit", "get_rate_limiter", "get_rate_limit_dependency"], "classes": [{"name": "RateLimitConfig", "description": "Configuration data class for specifying rate limiting attributes, including maximum requests, time period for limitation, and the Redis key prefix."}, {"name": "RateLimiter", "description": "Class that implements the rate limiting logic using Redis as a backend, ensuring that requests are controlled based on specified configurations."}, {"name": "RateLimitDependency", "description": "Class that provides a FastAPI dependency for enforcing rate limits on API endpoints, allowing configuration and checking of rate limiting status."}], "methods": [{"name": "None initialize(self)", "description": "Initializes the rate limiter and sets up the Redis client. This method must be called during application startup.", "scope": "RateLimiter", "scopeKind": "class"}, {"name": "None close(self)", "description": "Closes the rate limiter instance, resetting the initialized status. This should be called during application shutdown.", "scope": "RateLimiter", "scopeKind": "class"}, {"name": "Tuple[bool,int,int] is_rate_limited( self, key: str, config: RateLimitConfig )", "description": "Checks if a request identified by a unique key is rate limited based on provided configuration.", "scope": "RateLimiter", "scopeKind": "class"}, {"name": "str get_client_identifier(self, request: Request)", "description": "Generates a unique identifier for a client based on the FastAPI request, combining IP address and user agent.", "scope": "RateLimiter", "scopeKind": "class"}, {"name": "Callable rate_limit( requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )", "description": "Decorator function used to apply rate limiting to specific API endpoints.", "scope": "", "scopeKind": ""}, {"name": "RateLimiter get_rate_limiter()", "description": "Dependency function that returns the global rate limiter instance.", "scope": "", "scopeKind": ""}, {"name": "None disable_for_testing(cls, disabled: bool = True)", "description": "Class method to disable rate limiting for testing purposes.", "scope": "RateLimitDependency", "scopeKind": "class"}, {"name": "bool is_testing_disabled(cls)", "description": "Class method to check if rate limiting is disabled for testing.", "scope": "RateLimitDependency", "scopeKind": "class"}, {"name": "\"RateLimitDependency\" create( cls, requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )", "description": "Factory method for creating configured RateLimitDependency instances.", "scope": "RateLimitDependency", "scopeKind": "class"}, {"name": "None __call__(self, request: Request)", "description": "Method that must be implemented for the dependency to work, checking if a request is rate limited.", "scope": "RateLimitDependency", "scopeKind": "class"}, {"name": "Callable get_rate_limit_dependency( requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )", "description": "Creates and returns a configurable rate limit dependency for use in FastAPI.", "scope": "", "scopeKind": ""}, {"name": "__init__( self, requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )", "scope": "RateLimitDependency", "scopeKind": "class", "description": "unavailable"}, {"name": "\"RateLimiter\" __new__(cls)", "scope": "RateLimiter", "scopeKind": "class", "description": "unavailable"}, {"name": "redis.Redis client(self)", "scope": "RateLimiter", "scopeKind": "class", "description": "unavailable"}, {"name": "Callable decorator(func: Callable)", "scope": "rate_limit", "scopeKind": "function", "description": "unavailable"}, {"name": "Any wrapper(request: Request, *args: Any, **kwargs: Any)", "scope": "rate_limit.decorator", "scopeKind": "function", "description": "unavailable"}], "calls": ["redis_cache.client", "logger.info", "logger.error", "pipeline.zadd", "pipeline.zremrangebyscore", "pipeline.zcard", "pipeline.expire", "pipeline.execute", "JSONResponse"], "search-terms": ["rate limiting", "Redis backend", "FastAPI dependency"], "state": 2, "file_id": 29, "knowledge_revision": 125, "git_revision": "db26009eb51c1d1e59dfe8e186759e95d4f68e57", "revision_history": [{"65": ""}, {"111": "3ca38c1a5bb82a63be25191740c83663bd590a04"}, {"112": "3ca38c1a5bb82a63be25191740c83663bd590a04"}, {"125": "db26009eb51c1d1e59dfe8e186759e95d4f68e57"}], "ctags": [{"_type": "tag", "name": "RateLimitConfig", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^class RateLimitConfig:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RateLimitDependency", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^class RateLimitDependency:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RateLimiter", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^class RateLimiter:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__call__", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    async def __call__(self, request: Request) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, request: Request)", "scope": "RateLimitDependency", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def __init__($/", "language": "Python", "kind": "member", "signature": "( self, requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )", "scope": "RateLimitDependency", "scopeKind": "class"}, {"_type": "tag", "name": "__new__", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def __new__(cls) -> \"RateLimiter\":$/", "language": "Python", "typeref": "typename:\"RateLimiter\"", "kind": "member", "signature": "(cls)", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "_initialized", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    _initialized: bool = False$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "_instance", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    _instance: Optional[\"RateLimiter\"] = None$/", "language": "Python", "typeref": "typename:Optional[\"RateLimiter\"]", "kind": "variable", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "_testing_disabled", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    _testing_disabled = False$/", "language": "Python", "kind": "variable", "scope": "RateLimitDependency", "scopeKind": "class"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def client(self) -> redis.Redis:$/", "language": "Python", "typeref": "typename:redis.Redis", "kind": "member", "signature": "(self)", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "close", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    async def close(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def create($/", "language": "Python", "typeref": "typename:\"RateLimitDependency\"", "kind": "member", "signature": "( cls, requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )", "scope": "RateLimitDependency", "scopeKind": "class"}, {"_type": "tag", "name": "decorator", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def decorator(func: Callable) -> Callable:$/", "file": true, "language": "Python", "typeref": "typename:Callable", "kind": "function", "signature": "(func: Callable)", "scope": "rate_limit", "scopeKind": "function"}, {"_type": "tag", "name": "disable_for_testing", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def disable_for_testing(cls, disabled: bool = True) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(cls, disabled: bool = True)", "scope": "RateLimitDependency", "scopeKind": "class"}, {"_type": "tag", "name": "get_client_identifier", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def get_client_identifier(self, request: Request) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, request: Request)", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "get_rate_limit_dependency", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^def get_rate_limit_dependency($/", "language": "Python", "typeref": "typename:Callable", "kind": "function", "signature": "( requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )"}, {"_type": "tag", "name": "get_rate_limiter", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^async def get_rate_limiter() -> RateLimiter:$/", "language": "Python", "typeref": "typename:RateLimiter", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "initialize", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    async def initialize(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "is_rate_limited", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    async def is_rate_limited($/", "language": "Python", "typeref": "typename:Tuple[bool,int,int]", "kind": "member", "signature": "( self, key: str, config: RateLimitConfig )", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "is_testing_disabled", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def is_testing_disabled(cls) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "member", "signature": "(cls)", "scope": "RateLimitDependency", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "prefix", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    prefix: str = \"ratelimit\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "RateLimitConfig", "scopeKind": "class"}, {"_type": "tag", "name": "rate_limit", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^def rate_limit($/", "language": "Python", "typeref": "typename:Callable", "kind": "function", "signature": "( requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )"}, {"_type": "tag", "name": "rate_limiter", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^rate_limiter = RateLimiter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "redis", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^import redis.asyncio as redis$/", "language": "Python", "kind": "namespace", "nameref": "module:redis.asyncio"}, {"_type": "tag", "name": "wrapper", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^        async def wrapper(request: Request, *args: Any, **kwargs: Any) -> Any:$/", "file": true, "language": "Python", "typeref": "typename:Any", "kind": "function", "signature": "(request: Request, *args: Any, **kwargs: Any)", "scope": "rate_limit.decorator", "scopeKind": "function"}], "filename": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "hash": "280c437c354b423553dcd4d6a846d798", "format-version": 4, "code-base-name": "default", "fields": [{"name": "bool _initialized", "scope": "RateLimiter", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[\"RateLimiter\"] _instance", "scope": "RateLimiter", "scopeKind": "class", "description": "unavailable"}, {"name": "_testing_disabled = False", "scope": "RateLimitDependency", "scopeKind": "class", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str prefix", "scope": "RateLimitConfig", "scopeKind": "class", "description": "unavailable"}, {"name": "rate_limiter = RateLimiter()", "scope": "", "scopeKind": "", "description": "unavailable"}]}