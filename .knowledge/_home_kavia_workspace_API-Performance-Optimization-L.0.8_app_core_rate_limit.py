{"is_source_file": true, "format": "Python", "description": "This module provides a Redis-based implementation of rate limiting, including a RateLimiter class and a decorator for applying rate limits to FastAPI endpoints.", "external_files": ["app/core/cache", "app/core/config"], "external_methods": ["redis.asyncio", "fastapi.Depends", "fastapi.HTTPException", "fastapi.Request", "fastapi.responses.JSONResponse"], "published": ["rate_limit", "get_rate_limiter", "RateLimitDependency"], "classes": [{"name": "RateLimitConfig", "description": "A data class for configuring rate limits, specifying the number of requests, time period in seconds, and key prefix for Redis."}, {"name": "RateLimiter", "description": "A singleton class implementing the rate limiting functionality using Redis, responsible for checking rate limits and managing initialization and closure of the Redis client."}, {"name": "RateLimitDependency", "description": "Class providing FastAPI dependency to enforce rate limits on endpoints."}], "methods": [{"name": "\"RateLimiter\" __new__(cls)", "description": "Creates a singleton instance of RateLimiter.", "scope": "RateLimiter", "scopeKind": "class"}, {"name": "None initialize(self)", "description": "Initializes the rate limiter asynchronously, called during application startup.", "scope": "RateLimiter", "scopeKind": "class"}, {"name": "None close(self)", "description": "Closes the rate limiter, to be called during application shutdown.", "scope": "RateLimiter", "scopeKind": "class"}, {"name": "redis.Redis client(self)", "description": "Property that returns the Redis client used for rate limiting.", "scope": "RateLimiter", "scopeKind": "class"}, {"name": "Tuple[bool,int,int] is_rate_limited( self, key: str, config: RateLimitConfig )", "description": "Checks if a request is rate limited based on unique client identifier and configuration.", "scope": "RateLimiter", "scopeKind": "class"}, {"name": "str get_client_identifier(self, request: Request)", "description": "Generates a unique identifier for the client based on the FastAPI request object.", "scope": "RateLimiter", "scopeKind": "class"}, {"name": "Callable rate_limit( requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )", "description": "Decorator for applying rate limiting to API endpoints.", "scope": "", "scopeKind": ""}, {"name": "None __call__(self, request: Request)", "description": "Checks if the request is rate limited; called when the RateLimitDependency is used in FastAPI.", "scope": "RateLimitDependency", "scopeKind": "class"}, {"name": "__init__( self, requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )", "scope": "RateLimitDependency", "scopeKind": "class", "description": "unavailable"}, {"name": "Callable decorator(func: Callable)", "scope": "rate_limit", "scopeKind": "function", "description": "unavailable"}, {"name": "RateLimiter get_rate_limiter()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Any wrapper(request: Request, *args: Any, **kwargs: Any)", "scope": "rate_limit.decorator", "scopeKind": "function", "description": "unavailable"}], "calls": ["redis.asyncio.client.pipeline", "redis.RateLimiter.is_rate_limited", "logging.getLogger"], "search-terms": ["RateLimiter", "is_rate_limited", "rate_limit decorator"], "state": 2, "file_id": 29, "knowledge_revision": 65, "git_revision": "", "ctags": [{"_type": "tag", "name": "RateLimitConfig", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^class RateLimitConfig:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RateLimitDependency", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^class RateLimitDependency:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RateLimiter", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^class RateLimiter:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__call__", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    async def __call__(self, request: Request) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, request: Request)", "scope": "RateLimitDependency", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def __init__($/", "language": "Python", "kind": "member", "signature": "( self, requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )", "scope": "RateLimitDependency", "scopeKind": "class"}, {"_type": "tag", "name": "__new__", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def __new__(cls) -> \"RateLimiter\":$/", "language": "Python", "typeref": "typename:\"RateLimiter\"", "kind": "member", "signature": "(cls)", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "_initialized", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    _initialized: bool = False$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "_instance", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    _instance: Optional[\"RateLimiter\"] = None$/", "language": "Python", "typeref": "typename:Optional[\"RateLimiter\"]", "kind": "variable", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "client", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def client(self) -> redis.Redis:$/", "language": "Python", "typeref": "typename:redis.Redis", "kind": "member", "signature": "(self)", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "close", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    async def close(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "decorator", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def decorator(func: Callable) -> Callable:$/", "file": true, "language": "Python", "typeref": "typename:Callable", "kind": "function", "signature": "(func: Callable)", "scope": "rate_limit", "scopeKind": "function"}, {"_type": "tag", "name": "get_client_identifier", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    def get_client_identifier(self, request: Request) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, request: Request)", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "get_rate_limiter", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^async def get_rate_limiter() -> RateLimiter:$/", "language": "Python", "typeref": "typename:RateLimiter", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "initialize", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    async def initialize(self) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self)", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "is_rate_limited", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    async def is_rate_limited($/", "language": "Python", "typeref": "typename:Tuple[bool,int,int]", "kind": "member", "signature": "( self, key: str, config: RateLimitConfig )", "scope": "RateLimiter", "scopeKind": "class"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "prefix", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^    prefix: str = \"ratelimit\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "RateLimitConfig", "scopeKind": "class"}, {"_type": "tag", "name": "rate_limit", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^def rate_limit($/", "language": "Python", "typeref": "typename:Callable", "kind": "function", "signature": "( requests: Optional[int] = None, period_seconds: Optional[int] = None, prefix: str = \"ratelimit\", )"}, {"_type": "tag", "name": "rate_limiter", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^rate_limiter = RateLimiter()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "redis", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^import redis.asyncio as redis$/", "language": "Python", "kind": "namespace", "nameref": "module:redis.asyncio"}, {"_type": "tag", "name": "wrapper", "path": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "pattern": "/^        async def wrapper(request: Request, *args: Any, **kwargs: Any) -> Any:$/", "file": true, "language": "Python", "typeref": "typename:Any", "kind": "function", "signature": "(request: Request, *args: Any, **kwargs: Any)", "scope": "rate_limit.decorator", "scopeKind": "function"}], "filename": "/home/kavia/workspace/API-Performance-Optimization-L.0.8/app/core/rate_limit.py", "hash": "134c1c8eb2b5b7374d93c5ff3200adbd", "format-version": 4, "code-base-name": "default", "fields": [{"name": "bool _initialized", "scope": "RateLimiter", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[\"RateLimiter\"] _instance", "scope": "RateLimiter", "scopeKind": "class", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str prefix", "scope": "RateLimitConfig", "scopeKind": "class", "description": "unavailable"}, {"name": "rate_limiter = RateLimiter()", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"65": ""}]}